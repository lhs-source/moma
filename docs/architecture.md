# Decision Architecture - Story 1.13 주간 구매 한도 초과 가시성 개선

## Executive Summary

Story 1.13 "주간 식재료 구매 한도 기반 요리 시뮬레이터"의 가시성 개선을 위한 기술 설계입니다. 기존 Vue 3 + TypeScript + Tailwind CSS 스택을 활용하여 주간 구매 한도를 초과한 재료를 붉게 표시하는 기능을 구현합니다. 현재 MaterialsSummary.vue에 부분적으로 구현된 로직을 확장하여 사용자 경험을 개선합니다.

## Decision Summary

| Category | Decision | Version | Affects Epics | Rationale |
| -------- | -------- | ------- | ------------- | --------- |
| 가시성 표시 패턴 | 현재 방식 확장 (text-destructive + 추가 시각적 요소) | - | Epic 1 (Story 1.13) | 기존 코드 최소 변경으로 효과적 개선 |
| 경고 메시지 전략 | 기존 텍스트 색상 변경 방식 유지 | - | Epic 1 (Story 1.13) | 단순성 우선, 핵심 기능에 집중 |
| 컴포넌트 구조 | MaterialsSummary.vue 기존 구조 유지 및 개선 | - | Epic 1 (Story 1.13) | 안정성과 일관성 보장 |

## Project Structure

```
moma/
├── src/
│   ├── components/
│   │   └── ui/                    # shadcn-vue UI 컴포넌트
│   ├── views/
│   │   └── cooking/
│   │       ├── index.vue          # 요리 시뮬레이터 메인
│   │       └── components/
│   │           ├── MaterialsSummary.vue  # 🎯 주요 수정 대상
│   │           ├── WeeklyBuyableGrid.vue
│   │           └── RecipeGrid.vue
│   ├── data/
│   │   ├── items/foodIngredients.ts      # 식재료 데이터
│   │   └── recipes/                      # 레시피 데이터
│   ├── composables/                      # Vue 3 Composition API
│   └── utils/
│       └── timeUtils.ts                  # 시간 관련 유틸리티
└── docs/
    └── architecture.md                   # 이 문서
```

## Epic to Architecture Mapping

| Epic | 컴포넌트 | 설명 |
|------|----------|------|
| Epic 1 (Story 1.13) | MaterialsSummary.vue | 주간 구매 한도 초과 시 시각적 피드백 개선 |

## Technology Stack Details

### Core Technologies

- **Vue 3.5.13** - Composition API 기반 프론트엔드 프레임워크
- **TypeScript 5.8** - 타입 안전성 보장
- **Tailwind CSS 4.1.7** - 유틸리티 기반 스타일링
- **shadcn-vue 2.2.0** - UI 컴포넌트 라이브러리
- **Pinia 3.0.1** - Vue 상태 관리

### 빌드 도구

- **Vite 6.2.4** - 개발 서버 및 빌드 도구
- **Vitest 3.1.1** - 테스팅 프레임워크

## Implementation Patterns

### 가시성 개선 구현 가이드

**MaterialsSummary.vue 수정 사항:**

1. **기존 조건부 클래스 확장**
```vue
<!-- 현재 구현 -->
<span :class="[row.quantity > getBuyableCount(row.itemId) ? 'text-destructive font-semibold' : 'text-muted-foreground']">

<!-- 개선된 구현 -->
<span :class="[
  row.quantity > getBuyableCount(row.itemId) 
    ? 'text-destructive font-semibold bg-destructive/10 px-1 rounded border border-destructive/20' 
    : 'text-muted-foreground'
]">
```

2. **추가 시각적 요소**
```vue
<!-- 경고 아이콘 추가 -->
<span v-if="row.quantity > getBuyableCount(row.itemId)" class="text-destructive ml-1">⚠️</span>
```

### 일관성 규칙

**CSS 클래스 패턴:**
- 주간 한도 초과: `text-destructive font-semibold bg-destructive/10 px-1 rounded border border-destructive/20`
- 정상 상태: `text-muted-foreground`
- 경고 아이콘: `text-destructive ml-1`

**Vue 3 패턴:**
- Composition API 사용 (setup script)
- computed 속성으로 반응성 보장
- Props와 Emits의 타입 정의

### 기존 로직 활용

**getBuyableCount() 함수**: 수정 없이 그대로 사용
**데이터 구조**: 현재 totalRawMaterialsRows computed 활용
**상태 관리**: 로컬 컴포넌트 상태 유지

## 구현 체크리스트

- [ ] MaterialsSummary.vue 템플릿 수정 (조건부 클래스 확장)
- [ ] 시각적 요소 추가 (배경색, 테두리, 아이콘)
- [ ] 기존 로직 동작 검증
- [ ] 모바일 반응형 확인
- [ ] 다크모드 호환성 검증

## 테스트 전략

**수동 테스트:**
1. 요리 선택 시 주간 한도 초과 재료 확인
2. 초과된 재료가 붉게 표시되는지 확인
3. 모바일/데스크톱 환경에서 가독성 확인

**자동 테스트 (선택사항):**
- MaterialsSummary.vue 컴포넌트 테스트
- getBuyableCount() 함수 단위 테스트

## 개발 환경 설정

### Prerequisites
- Node.js 22+
- npm 또는 yarn

### 개발 명령어
```bash
# 개발 서버 시작
npm run dev

# 타입 체크
npm run type-check

# 린트 실행
npm run lint
```

## 구현 우선순위

1. **High Priority**: MaterialsSummary.vue 시각적 개선
2. **Medium Priority**: 접근성 개선 (aria-label 등)
3. **Low Priority**: 애니메이션 효과 추가

---

## 결론

Story 1.13 "주간 식재료 구매 한도 기반 요리 시뮬레이터"의 가시성 개선을 위한 기술 설계가 완료되었습니다. 

**핵심 개선사항:**
- MaterialsSummary.vue에서 주간 구매 한도 초과 재료를 더 명확하게 시각화
- 기존 `text-destructive` 클래스에 배경색, 테두리, 아이콘 등 추가 시각적 요소 적용
- 최소한의 코드 변경으로 최대 효과 달성

**다음 단계:**
1. MaterialsSummary.vue 컴포넌트 수정
2. 시각적 개선 사항 적용
3. 테스트 및 검증

_Generated by BMAD Decision Architecture Workflow v1.3.2_  
_Date: 2025-10-28_  
_For: hslee_
